[{"caption":"Table 1: Cohort summaries. \n\n","rows":["LoS ( mean )","Gender ( % male )","LoS ( median )","In - hospital mortality","Remaining LoS ( mean )","Age ( mean )","Remaining LoS ( median )"],"columns":["10 , 264","17 , 781","102 , 749","21 , 889","10 , 497","50 , 042","146 , 671","7 , 507","82 , 973","22 , 033","69 , 609","35 , 028","eICU","48 , 848","118 , 535","MIMIC - IV"],"mergedAllColumns":[],"numberCells":[{"number":"9.25%","isBolded":false,"associatedRows":["In - hospital mortality"],"associatedColumns":["eICU","118 , 535","82 , 973","17 , 781","17 , 781","146 , 671","102 , 749","22 , 033","21 , 889"],"associatedMergedColumns":[]},{"number":"63.1","isBolded":false,"associatedRows":["Age ( mean )"],"associatedColumns":["eICU","118 , 535","82 , 973","17 , 781","17 , 781","146 , 671","102 , 749","22 , 033","21 , 889"],"associatedMergedColumns":[]},{"number":"2.70","isBolded":false,"associatedRows":["Remaining LoS ( median )"],"associatedColumns":["MIMIC - IV","50 , 042","35 , 028","7 , 507","7 , 507","69 , 609","48 , 848","10 , 497","10 , 264"],"associatedMergedColumns":[]},{"number":"54.1%","isBolded":false,"associatedRows":["Gender ( % male )"],"associatedColumns":["eICU","118 , 535","82 , 973","17 , 781","17 , 781","146 , 671","102 , 749","22 , 033","21 , 889"],"associatedMergedColumns":[]},{"number":"1.67","isBolded":false,"associatedRows":["Remaining LoS ( median )"],"associatedColumns":["eICU","118 , 535","82 , 973","17 , 781","17 , 781","146 , 671","102 , 749","22 , 033","21 , 889"],"associatedMergedColumns":[]},{"number":"5.70","isBolded":false,"associatedRows":["Remaining LoS ( mean )"],"associatedColumns":["MIMIC - IV","50 , 042","35 , 028","7 , 507","7 , 507","69 , 609","48 , 848","10 , 497","10 , 264"],"associatedMergedColumns":[]},{"number":"3.01","isBolded":false,"associatedRows":["LoS ( mean )"],"associatedColumns":["eICU","118 , 535","82 , 973","17 , 781","17 , 781","146 , 671","102 , 749","22 , 033","21 , 889"],"associatedMergedColumns":[]},{"number":"2.06","isBolded":false,"associatedRows":["LoS ( median )"],"associatedColumns":["MIMIC - IV","50 , 042","35 , 028","7 , 507","7 , 507","69 , 609","48 , 848","10 , 497","10 , 264"],"associatedMergedColumns":[]},{"number":"64.7","isBolded":false,"associatedRows":["Age ( mean )"],"associatedColumns":["MIMIC - IV","50 , 042","35 , 028","7 , 507","7 , 507","69 , 609","48 , 848","10 , 497","10 , 264"],"associatedMergedColumns":[]},{"number":"11.4%","isBolded":false,"associatedRows":["In - hospital mortality"],"associatedColumns":["MIMIC - IV","50 , 042","35 , 028","7 , 507","7 , 507","69 , 609","48 , 848","10 , 497","10 , 264"],"associatedMergedColumns":[]},{"number":"3.47","isBolded":false,"associatedRows":["Remaining LoS ( mean )"],"associatedColumns":["eICU","118 , 535","82 , 973","17 , 781","17 , 781","146 , 671","102 , 749","22 , 033","21 , 889"],"associatedMergedColumns":[]},{"number":"3.98","isBolded":false,"associatedRows":["LoS ( mean )"],"associatedColumns":["MIMIC - IV","50 , 042","35 , 028","7 , 507","7 , 507","69 , 609","48 , 848","10 , 497","10 , 264"],"associatedMergedColumns":[]},{"number":"1.82","isBolded":false,"associatedRows":["LoS ( median )"],"associatedColumns":["eICU","118 , 535","82 , 973","17 , 781","17 , 781","146 , 671","102 , 749","22 , 033","21 , 889"],"associatedMergedColumns":[]},{"number":"55.8%","isBolded":false,"associatedRows":["Gender ( % male )"],"associatedColumns":["MIMIC - IV","50 , 042","35 , 028","7 , 507","7 , 507","69 , 609","48 , 848","10 , 497","10 , 264"],"associatedMergedColumns":[]}]},{"caption":"Table 2: Performance of the TPC model compared to baseline models. The loss function in all experiments is MSLE. For the first \nfour metrics, lower is better. The error margins are 95% confidence intervals (CIs) calculated over 10 runs. These are not present \nfor the mean, median and APACHE-IV models because they are deterministic. The best results are highlighted in blue. If the \nresult is statistically significant on a t-test then it is indicated with stars (*p\u003c0.05, **p\u003c0.001). MAD: mean absolute deviation; \nMAPE: mean absolute percentage error; MSE: mean squared error; MSLE: mean squared logarithmic error; R 2 : coefficient of \ndetermination, Kappa: Cohen Kappa Score.  † Note that the APACHE-IV results (only present in the eICU dataset) cannot be \ncompared directly to the other models (explained in Section 5.2). \n\n","rows":["Mean","Median","APACHE - IV †"],"columns":["114 . 1±0 . 6","Transformer","TPC","0 . 27±0 . 02 * *","118 . 2±1 . 1","2 . 39±0 . 00","2 . 37±0 . 00","63 . 5±4 . 3 * *","0 . 58±0 . 01 * *","1 . 43±0 . 00","2 . 36±0 . 00","1 . 47±0 . 01","1 . 78±0 . 02 * *","eICU","MSE","0 . 30±0 . 00","LSTM","26 . 7±0 . 1","Kappa","114 . 5±0 . 4","0 . 70±0 . 03 * *","MAPE","Data","0 . 28±0 . 00","MAD","CW LSTM","2","21 . 7±0 . 5 * *","26 . 9±0 . 1","MSLE","26 . 6±0 . 1","0 . 09±0 . 00","0 . 10±0 . 00"],"mergedAllColumns":["MIMIC - IV"],"numberCells":[{"number":"0.00","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["2","0 . 09±0 . 00","0 . 10±0 . 00","0 . 09±0 . 00","0 . 27±0 . 02 * *"],"associatedMergedColumns":[]},{"number":"2.80","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MSLE","1 . 47±0 . 01","1 . 43±0 . 00","1 . 43±0 . 00","0 . 70±0 . 03 * *"],"associatedMergedColumns":[]},{"number":"5.3","isBolded":true,"associatedRows":[],"associatedColumns":["Data","eICU","CW LSTM","Transformer","TPC","LSTM","CW LSTM","Transformer","TPC"],"associatedMergedColumns":["MIMIC - IV"]},{"number":"-0.11","isBolded":false,"associatedRows":["Median"],"associatedColumns":["2"],"associatedMergedColumns":[]},{"number":"182.1","isBolded":false,"associatedRows":["APACHE - IV †"],"associatedColumns":["MAPE"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Median"],"associatedColumns":["Kappa"],"associatedMergedColumns":[]},{"number":"29.5","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MSE"],"associatedMergedColumns":[]},{"number":"16.6†","isBolded":false,"associatedRows":["APACHE - IV †"],"associatedColumns":["MSE"],"associatedMergedColumns":[]},{"number":"474.9","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MAPE","118 . 2±1 . 1","114 . 5±0 . 4","114 . 1±0 . 6","63 . 5±4 . 3 * *"],"associatedMergedColumns":[]},{"number":"-0.01","isBolded":false,"associatedRows":["APACHE - IV †"],"associatedColumns":["2"],"associatedMergedColumns":[]},{"number":"0.20","isBolded":false,"associatedRows":["APACHE - IV †"],"associatedColumns":["Kappa"],"associatedMergedColumns":[]},{"number":"2.54","isBolded":false,"associatedRows":["APACHE - IV †"],"associatedColumns":["MAD"],"associatedMergedColumns":[]},{"number":"-0.12","isBolded":false,"associatedRows":["Median"],"associatedColumns":["2","0 . 09±0 . 00","0 . 10±0 . 00","0 . 09±0 . 00","0 . 27±0 . 02 * *"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["Kappa"],"associatedMergedColumns":[]},{"number":"216.8","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MAPE","118 . 2±1 . 1","114 . 5±0 . 4","114 . 1±0 . 6","63 . 5±4 . 3 * *"],"associatedMergedColumns":[]},{"number":"77.7","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MSE","26 . 9±0 . 1","26 . 6±0 . 1","26 . 7±0 . 1","21 . 7±0 . 5 * *"],"associatedMergedColumns":[]},{"number":"2.09","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MSLE","1 . 47±0 . 01","1 . 43±0 . 00","1 . 43±0 . 00","0 . 70±0 . 03 * *"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["Kappa","0 . 28±0 . 00","0 . 30±0 . 00","0 . 30±0 . 00","0 . 58±0 . 01 * *"],"associatedMergedColumns":[]},{"number":"3.21","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MAD"],"associatedMergedColumns":[]},{"number":"86.8","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MSE","26 . 9±0 . 1","26 . 6±0 . 1","26 . 7±0 . 1","21 . 7±0 . 5 * *"],"associatedMergedColumns":[]},{"number":"5.24","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MAD","2 . 39±0 . 00","2 . 37±0 . 00","2 . 36±0 . 00","1 . 78±0 . 02 * *"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Median"],"associatedColumns":["Kappa","0 . 28±0 . 00","0 . 30±0 . 00","0 . 30±0 . 00","0 . 58±0 . 01 * *"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["2"],"associatedMergedColumns":[]},{"number":"2.15","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MSLE"],"associatedMergedColumns":[]},{"number":"1.10","isBolded":false,"associatedRows":["APACHE - IV †"],"associatedColumns":["MSLE"],"associatedMergedColumns":[]},{"number":"184.4","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MAPE"],"associatedMergedColumns":[]},{"number":"395.7","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MAPE"],"associatedMergedColumns":[]},{"number":"32.6","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MSE"],"associatedMergedColumns":[]},{"number":"4.60","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MAD","2 . 39±0 . 00","2 . 37±0 . 00","2 . 36±0 . 00","1 . 78±0 . 02 * *"],"associatedMergedColumns":[]},{"number":"2.87","isBolded":false,"associatedRows":["Mean"],"associatedColumns":["MSLE"],"associatedMergedColumns":[]},{"number":"2.76","isBolded":false,"associatedRows":["Median"],"associatedColumns":["MAD"],"associatedMergedColumns":[]}]},{"caption":"Table 3: Ablation studies of the TPC model (performed on the eICU dataset). Unless otherwise specified, the loss function is \nMSLE. The first subtable compares the effect of the loss function on the TPC model (see ","rows":["MAD","Model","MAPE","MSLE","MSE"],"columns":["of comparison . WS : weight sharing ; \" no skip \" : no skip connections ; \" no diag . \" : no diagnoses , \" no decay \" : no decay indicators ."],"mergedAllColumns":[],"numberCells":[{"number":"2","isBolded":false,"associatedRows":["Model","MAD","MAPE","MSE","MSLE"],"associatedColumns":["of comparison . WS : weight sharing ; \" no skip \" : no skip connections ; \" no diag . \" : no diagnoses , \" no decay \" : no decay indicators ."],"associatedMergedColumns":[]}]},{"caption":"Table 4: Performance of the TPC model in the multitask setting. We compare the performance of each model on individual \ntasks (mortality only on the first line; LoS only on the second) to the multitask setting (both LoS and mortality on the third \nline). The performance of the baseline models are reported in Tables 14 and 15. \n\n","rows":[],"columns":["Length of Stay"],"mergedAllColumns":[],"numberCells":[{"number":"2","isBolded":false,"associatedRows":[],"associatedColumns":["Length of Stay"],"associatedMergedColumns":[]}]},{"caption":"Table 10: Hyperparameter Search Ranges. We took a random \nsample from each range and converted to an integer if neces-\nsary. For the kernel sizes (not shown in the table) the range \nwas dependent on the number of TPC layers selected (be-\ncause large kernel sizes combined with a large number of \nlayers can have an inappropriately wide range as the dila-\ntion factor increases per layer). In general the range of ker-\nnel sizes was around 2-5 (but it could be up to 10 for small \nnumbers of TPC Layers). \n\n","rows":["max (","Point . Channels","Diagnosis Embedding Size","16","Feedforward Size","No . Attention Heads","No . LSTM Layers","LSTM Hidden State Size","256","We place a","No . Transformer Layers","No . TPC Layers","512","Batch Size","Learning Rate","CW LSTM Hidden State Size","Temp . Channels","Final FC Layer Size","Dropout Rate ( all )","64","Temp . Channels ( weight sharing )"],"columns":["Upper","12","Lower","True","Scale","False","10"],"mergedAllColumns":["very small true LoS values do not produce unbounded MAPE values .","−","log","Linear","10"],"numberCells":[{"number":"0.0001","isBolded":false,"associatedRows":["Learning Rate"],"associatedColumns":["Lower"],"associatedMergedColumns":["Linear"]},{"number":"2","isBolded":false,"associatedRows":["Diagnosis Embedding Size","16","64"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["10"]},{"number":"1","isBolded":false,"associatedRows":["No . LSTM Layers"],"associatedColumns":["Lower","True","True","12"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["LSTM Hidden State Size","16","256"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["No . Attention Heads"],"associatedColumns":["Lower","True","True"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["Feedforward Size","16","256"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["Temp . Channels ( weight sharing )","16","256"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"4","isBolded":false,"associatedRows":["No . Transformer Layers","max (","16"],"associatedColumns":["Upper","False","False","12","10"],"associatedMergedColumns":["−"]},{"number":"4","isBolded":false,"associatedRows":["Temp . Channels"],"associatedColumns":["Lower","True","True"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["Temp . Channels ( weight sharing )","16","64"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["CW LSTM Hidden State Size","16","16"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"4","isBolded":false,"associatedRows":["Batch Size"],"associatedColumns":["Lower"],"associatedMergedColumns":[]},{"number":"2","isBolded":false,"associatedRows":["Batch Size","16","512"],"associatedColumns":["Scale"],"associatedMergedColumns":[]},{"number":"2","isBolded":false,"associatedRows":["Point . Channels","16","16"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"0","isBolded":false,"associatedRows":["Dropout Rate ( all )"],"associatedColumns":["Lower"],"associatedMergedColumns":["log"]},{"number":"0.01","isBolded":false,"associatedRows":["Learning Rate","16"],"associatedColumns":["Upper"],"associatedMergedColumns":["Linear"]},{"number":"4","isBolded":false,"associatedRows":["CW LSTM Hidden State Size"],"associatedColumns":["Lower","True","True"],"associatedMergedColumns":["log"]},{"number":"1","isBolded":false,"associatedRows":["No . TPC Layers"],"associatedColumns":["Lower","True","True"],"associatedMergedColumns":["log"]},{"number":"4","isBolded":false,"associatedRows":["No . LSTM Layers","16"],"associatedColumns":["Upper","False","False","12"],"associatedMergedColumns":["log"]},{"number":"4hourlowerboundonthedivisori.e.","isBolded":false,"associatedRows":["We place a"],"associatedColumns":["Lower","True","True","12","10"],"associatedMergedColumns":["very small true LoS values do not produce unbounded MAPE values ."]},{"number":"0.5","isBolded":false,"associatedRows":["Dropout Rate ( all )","16"],"associatedColumns":["Upper"],"associatedMergedColumns":["log"]},{"number":"4","isBolded":false,"associatedRows":["Point . Channels"],"associatedColumns":["Lower","True","True"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["No . Attention Heads","16","16"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"1","isBolded":false,"associatedRows":["No . Transformer Layers"],"associatedColumns":["Lower","True","True","12"],"associatedMergedColumns":["Linear"]},{"number":"2","isBolded":false,"associatedRows":["Temp . Channels","16","16"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]},{"number":"2","isBolded":false,"associatedRows":["Final FC Layer Size","16","64"],"associatedColumns":["Scale","False","False"],"associatedMergedColumns":["log"]}]},{"caption":"Table 12: The effect of changing the size of the training data on the LSTM, CW LSTM, Transformer, and TPC model performance \nin the eICU dataset. A hundred percent of the training set represents 102,712 ICU stays, 50% is 51,356, 25% is 25,678, 12.5% is \n12,839, and 6.25% is 6,420 stays. \n\n","rows":["in the eICU dataset . A hundred percent of the training set represents 102 , 712 ICU stays ,"],"columns":[],"mergedAllColumns":[],"numberCells":[{"number":"25%is25,678,","isBolded":false,"associatedRows":["in the eICU dataset . A hundred percent of the training set represents 102 , 712 ICU stays ,"],"associatedColumns":[],"associatedMergedColumns":[]},{"number":"12.5%is","isBolded":false,"associatedRows":["in the eICU dataset . A hundred percent of the training set represents 102 , 712 ICU stays ,"],"associatedColumns":[],"associatedMergedColumns":[]},{"number":"50%is51,356,","isBolded":false,"associatedRows":["in the eICU dataset . A hundred percent of the training set represents 102 , 712 ICU stays ,"],"associatedColumns":[],"associatedMergedColumns":[]}]},{"caption":"Table 13: The effect of training with the mean squared logarithmic error (MSLE) loss function when compared to mean squared \nerror (MSE) on the eICU dataset. This is an extension to Table 3 (refer to its legend for definitions of the metric acronyms, \ndetailed of CI calculations and meaning of the colour scheme). \n\n","rows":["MAD","Model","MAPE","MSLE","MSE"],"columns":["detailed of CI calculations and meaning of the colour scheme ) ."],"mergedAllColumns":[],"numberCells":[{"number":"2","isBolded":false,"associatedRows":["Model","MAD","MAPE","MSE","MSLE"],"associatedColumns":["detailed of CI calculations and meaning of the colour scheme ) ."],"associatedMergedColumns":[]}]},{"caption":"Table 14: eICU multitask results. We compare the performance of each model on individual tasks (LoS or mortality prediction) \nto the multitask setting (both LoS and mortality). The results from Table 2a are repeated here for ease of comparison. Note \nthat the \u0027mean\u0027 and \u0027median\u0027 models are only for LoS -there is no equivalent model for mortality prediction. \n\n","rows":["Mean","Median","-"],"columns":["Length of Stay","In - Hospital Mortality","MAD","2","Kappa","MAPE","MSLE","MSE"],"mergedAllColumns":[],"numberCells":[{"number":"395.7","isBolded":false,"associatedRows":["Mean","-","-"],"associatedColumns":["Length of Stay","MAPE"],"associatedMergedColumns":[]},{"number":"-0.11","isBolded":false,"associatedRows":["Median","-","-"],"associatedColumns":["Length of Stay","2"],"associatedMergedColumns":[]},{"number":"2.87","isBolded":false,"associatedRows":["Mean","-","-"],"associatedColumns":["Length of Stay","MSLE"],"associatedMergedColumns":[]},{"number":"184.4","isBolded":false,"associatedRows":["Median","-","-"],"associatedColumns":["Length of Stay","MAPE"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Mean","-","-"],"associatedColumns":["Length of Stay","2"],"associatedMergedColumns":[]},{"number":"32.6","isBolded":false,"associatedRows":["Median","-","-"],"associatedColumns":["Length of Stay","MSE"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Median","-","-"],"associatedColumns":["Length of Stay","Kappa"],"associatedMergedColumns":[]},{"number":"0.00","isBolded":false,"associatedRows":["Mean","-","-"],"associatedColumns":["Length of Stay","Kappa"],"associatedMergedColumns":[]},{"number":"2.15","isBolded":false,"associatedRows":["Median","-","-"],"associatedColumns":["Length of Stay","MSLE"],"associatedMergedColumns":[]},{"number":"3.21","isBolded":false,"associatedRows":["Mean","-","-"],"associatedColumns":["In - Hospital Mortality","MAD"],"associatedMergedColumns":[]},{"number":"2.76","isBolded":false,"associatedRows":["Median","-","-"],"associatedColumns":["In - Hospital Mortality","MAD"],"associatedMergedColumns":[]},{"number":"29.5","isBolded":false,"associatedRows":["Mean","-","-"],"associatedColumns":["Length of Stay","MSE"],"associatedMergedColumns":[]}]}]